<?xml version="1.0"?>
<!DOCTYPE cache-config SYSTEM "cache-config.dtd">

<cache-config xmlns:sync="class:com.oracle.coherence.patterns.pushreplication.configuration.PushReplicationNamespaceContentHandler">
	<introduce:config
		file="coherence-pushreplicationpattern-pof-cache-config.xml" />
		
	<caching-schemes>
	
	   <sync:provider pof-enabled="true">
	     <sync:coherence-provider />
	   </sync:provider>

		<transactional-scheme>
			<scheme-name>tx-default</scheme-name>
			<service-name>TransactionalCache</service-name>
			<autostart>true</autostart>
			<thread-count>10</thread-count>
			<request-timeout>30000</request-timeout>
		</transactional-scheme>

		<distributed-scheme>
			<scheme-name>distributed-scheme</scheme-name>
			<service-name>SupportCache</service-name>
			<backing-map-scheme>
				<local-scheme />
			</backing-map-scheme>
			<autostart>true</autostart>
		</distributed-scheme>

		<proxy-scheme>
			<service-name>ExtendTcpProxyService</service-name>
			<acceptor-config>
				<tcp-acceptor>
					<local-address>
                        <address>localhost</address>
                        <port system-property="tangosol.extend.port">20002</port>
                        <reusable>true</reusable>
                    </local-address>
                    <keep-alive-enabled>true</keep-alive-enabled>
				</tcp-acceptor>
			</acceptor-config>
			<autostart>true</autostart>
		</proxy-scheme>

		<remote-cache-scheme>
			<scheme-name>extend-dist</scheme-name>
			<service-name>SupportCluster1-CACHE</service-name>
			<initiator-config>
				<tcp-initiator>
					<remote-addresses>
						<socket-address>
							<address>localhost</address>
							<port>20000</port>
						</socket-address>
					</remote-addresses>
					<connect-timeout>10s</connect-timeout>
				</tcp-initiator>
				<outgoing-message-handler>
					<request-timeout>5s</request-timeout>
				</outgoing-message-handler>
			</initiator-config>
		</remote-cache-scheme>

		<remote-invocation-scheme>
			<scheme-name>SupportCluster1</scheme-name>
			<service-name>SupportCluster1</service-name>
			<initiator-config>
				<tcp-initiator>
					<remote-addresses>
						<socket-address>
							<address>localhost</address>
							<port>20000</port>
						</socket-address>
					</remote-addresses>
					<connect-timeout>10s</connect-timeout>
				</tcp-initiator>
				<outgoing-message-handler>
					<request-timeout>5s</request-timeout>
				</outgoing-message-handler>
			</initiator-config>
		</remote-invocation-scheme>
		
		<invocation-scheme>
            <scheme-name>invocation-scheme</scheme-name>
            <service-name>InvocationService</service-name>
            <thread-count>2</thread-count>
            <autostart>true</autostart>
        </invocation-scheme>

	</caching-schemes>
</cache-config>

